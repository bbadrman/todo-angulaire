<h2>{{ title }}</h2>

<p *ngIf="todoService.todos().length === 0">Aucune tÃ¢che pour le moment ðŸŽ‰</p>
<p *ngIf="todoService.todos().length > 0">
  {{ todoService.remaining() }} Ã  faire / {{ todoService.todos().length }} au total
</p>

<app-todo-form (add)="addTodo($event)"></app-todo-form>

<div class="filters">
  <button [class.active]="todoService.filter() === 'all'"       (click)="setFilter('all')">Toutes</button>
  <button [class.active]="todoService.filter() === 'active'"    (click)="setFilter('active')">Actives</button>
  <button [class.active]="todoService.filter() === 'completed'" (click)="setFilter('completed')">TerminÃ©es</button>
</div>

<ul>
  <li *ngFor="let t of todoService.filteredTodos(); let i = index; trackBy: trackById"
      [class.done]="t.done">
    <label class="row">
      <input type="checkbox" [checked]="t.done" (change)="toggle(i)" />

      <!-- Affichage normal -->
      <span class="text" *ngIf="editingId !== t.id" (dblclick)="startEdit(t.id, t.text)" title="Double-clique pour modifier">
        {{ i + 1 }}. {{ t.text }}
      </span>

      <!-- Mode Ã©dition -->
      <input *ngIf="editingId === t.id"
             type="text"
             [(ngModel)]="draftText"
             (keydown.enter)="commitEdit()"
             (keydown.escape)="cancelEdit()"
             (blur)="commitEdit()"
             autofocus
             class="edit-input" />
    </label>

    <button class="delete" (click)="removeTodo(i)" aria-label="Supprimer la tÃ¢che {{t.text}}">Ã—</button>
  </li>
</ul>

<div class="actions" *ngIf="todoService.todos().length">
  <button (click)="clearAll()">Tout vider</button>
  <button (click)="clearCompleted()" [disabled]="!todoService.completed()">Supprimer les terminÃ©es</button>
</div>
